<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Smart Release Planner ‚Äî MVP (Upload Version)</title>
  <style>
    :root { color-scheme: dark; }
    body { margin:0; background:#0f172a; color:#e5e7eb; font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif; }
    .container { max-width:1100px; margin:0 auto; padding:24px; }
    h1 { margin:0 0 16px; display:flex; align-items:center; gap:10px; font-size:28px; }
    .card { background:#0b1220; border:1px solid #334155; border-radius:16px; padding:18px; }
    .row { display:grid; grid-template-columns:1fr; gap:14px; }
    @media (min-width: 900px){ .row{ grid-template-columns:1fr 1fr; } }
    label { display:block; font-size:13px; color:#cbd5e1; margin-bottom:6px; }
    input, textarea, button { width:100%; box-sizing:border-box; border-radius:10px; }
    input, textarea { background:#0a0f1a; color:#e5e7eb; border:1px solid #334155; padding:10px 12px; }
    textarea { min-height:90px; resize:vertical; }
    button { background:#38bdf8; color:#0a0f1a; border:none; padding:10px 14px; font-weight:700; cursor:pointer; }
    button.secondary { background:#111827; color:#e5e7eb; border:1px solid #334155; }
    button:disabled { opacity:.6; cursor:not-allowed; }
    .grid { display:grid; grid-template-columns:1fr; gap:14px; }
    @media (min-width: 900px){ .grid{ grid-template-columns:1fr 1fr; } }
    .event { background:#0a0f1a; border:1px solid #334155; border-radius:14px; padding:12px; }
    .muted { color:#94a3b8; font-size:12px; }
    .title { font-weight:700; }
    .spacer { height:12px; }
    .hidden { display:none; }
  </style>
</head>
<body>
  <div class="container">
    <h1>üéµ Smart Release Planner ‚Äî MVP</h1>

    <div class="card">
      <div class="row">
        <div>
          <label for="songFile">Upload a Song (MP3/WAV)</label>
          <input id="songFile" type="file" accept="audio/*" />
        </div>
        <div>
          <label for="genre">–ñ–∞–Ω—Ä</label>
          <input id="genre" placeholder="Pop / HipHop / EDM / Indie / RnB / Rock / Trap" />
        </div>
        <div>
          <label for="wstart">–ü–µ—Ä–∏–æ–¥: –û—Ç</label>
          <input type="date" id="wstart" />
        </div>
        <div>
          <label for="wend">–ü–µ—Ä–∏–æ–¥: –î–æ</label>
          <input type="date" id="wend" />
        </div>
        <div>
          <label for="followers">–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–∏ (–ø–æ –∏–∑–±–æ—Ä)</label>
          <input id="followers" type="number" placeholder="–Ω–∞–ø—Ä. 2500" />
        </div>
        <div>
          <label for="notes">–ó–∞–±–µ–ª–µ–∂–∫–∏ (–ø–æ –∏–∑–±–æ—Ä)</label>
          <textarea id="notes" placeholder="–ö–æ–Ω—Ç–µ–∫—Å—Ç: –ø–ª–∞–Ω–∏—Ä–∞–Ω —Å–∏–Ω–≥—ä–ª, –∫–æ–ª–∞–±–æ—Ä–∞—Ü–∏—è, mood, BPM..."></textarea>
        </div>
        <div style="grid-column:1 / -1">
          <button id="genBtn">–ì–µ–Ω–µ—Ä–∏—Ä–∞–π –ø–ª–∞–Ω</button>
        </div>
      </div>
    </div>

    <div class="spacer"></div>

    <div id="resultWrap" class="hidden">
      <div class="card">
        <div class="title">üìÖ –ü—Ä–µ–ø–æ—Ä—ä—á–∞–Ω–∞ –¥–∞—Ç–∞ –∑–∞ —Ä–µ–ª–∏–π–∑</div>
        <div id="recDate" style="margin-top:6px; font-size:18px; font-weight:700">‚Äî</div>
        <div id="reason" class="muted">‚Äî</div>
        <div id="windowInfo" class="muted" style="margin-top:6px">‚Äî</div>
        <div class="row" style="margin-top:14px">
          <div>
            <div class="title" style="margin-bottom:6px">–ù–∞–π-–¥–æ–±—Ä–∏ –¥–Ω–∏ –∑–∞ –ø–æ—Å—Ç–≤–∞–Ω–µ</div>
            <ul id="bestDays"></ul>
          </div>
        </div>
      </div>

      <div class="spacer"></div>
      <div id="eventsGrid" class="grid"></div>
    </div>
  </div>

  <script>
    const sofiaTZ = "Europe/Sofia";
    const fmtBG = (dt)=> new Intl.DateTimeFormat("bg-BG", {dateStyle:"full", timeStyle:"short", timeZone:sofiaTZ}).format(dt);
    const addDays = (d, n)=>{ const x=new Date(d); x.setDate(x.getDate()+n); return x; };
    const atTime = (d, h=18, m=0)=>{ const x=new Date(d); x.setHours(h,m,0,0); return x; };

    function pickBestDate(genre,start,end){
      const today=new Date();
      const startDate=new Date(start); const endDate=new Date(end);
      const result=atTime(addDays(startDate,7),18,0);
      return {dt:result,reason:`–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑–±—Ä–∞–Ω –æ–ø—Ç–∏–º–∞–ª–µ–Ω –¥–µ–Ω –∑–∞ ${genre}`};
    }

    const $=(id)=>document.getElementById(id);
    function setDefaults(){ const s=addDays(new Date(),7).toISOString().slice(0,10); const e=addDays(new Date(),30).toISOString().slice(0,10); $("wstart").value=s; $("wend").value=e; }

    $("genBtn").addEventListener("click",()=>{
      if(!$("songFile").files.length){ alert("–ú–æ–ª—è, –∫–∞—á–∏ –ø–µ—Å–µ–Ω!"); return; }
      const genre=$("genre").value; const s=$("wstart").value; const e=$("wend").value;
      const {dt,reason:why}=pickBestDate(genre,s,e);
      $("recDate").textContent=fmtBG(dt);
      $("reason").textContent=`–ü—Ä–∏—á–∏–Ω–∞: ${why}`;
      $("windowInfo").textContent=`–ü–µ—Ä–∏–æ–¥: ${s} ‚Üí ${e}`;
      $("bestDays").innerHTML="<li>–≤—Ç–æ—Ä–Ω–∏–∫</li><li>—á–µ—Ç–≤—ä—Ä—Ç—ä–∫</li>";
      const div=document.createElement('div'); div.className='event'; div.innerHTML=`<div class='muted'>${fmtBG(dt)}</div><div class='title'>RELEASE</div><div class='muted'><b>–ö–∞–Ω–∞–ª:</b> Spotify/YouTube</div><div>–ü—É–±–ª–∏–∫—É–≤–∞–π –ª–∏–Ω–∫–æ–≤–µ + Premiere –≤ YouTube. –î–æ–±–∞–≤–∏ CTA –≤ –æ–ø–∏—Å–∞–Ω–∏–µ—Ç–æ.</div>`;
      $("eventsGrid").innerHTML=''; $("eventsGrid").appendChild(div);
      $("resultWrap").classList.remove('hidden');
    });

    setDefaults();
  </script>
</body>
</html>

